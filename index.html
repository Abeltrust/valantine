<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>A Gentle Valentine ðŸ’–</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />

<!-- Bootstrap CDN -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display&family=Allura&display=swap" rel="stylesheet">

<style>
/* =====================
   GLOBAL THEME
===================== */
body {
  margin: 0;
  background: radial-gradient(circle at top, #ffb3c1 0%, #7b0f1b 70%);
  font-family: "Playfair Display", serif;
  min-height: 100vh;
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 1.5s ease;
}

/* =====================
   MAIN CARD
===================== */
.card-box {
  background: rgba(255, 241, 230, 0.96);
  padding: 60px;
  border-radius: 28px;
  width: 520px;
  text-align: center;
  box-shadow: 0 40px 100px rgba(0,0,0,.25);
  position: relative;
  z-index: 5;
}

/* =====================
   TEXT
===================== */
h1 {
  font-family: "Allura", cursive;
  font-size: 3rem;
  color: #b71c1c;
}

p {
  font-size: 1.1rem;
  line-height: 1.7;
  color: #5a0c18;
}

/* =====================
   FLOATING TEXT ANIMATIONS
===================== */
@keyframes fromLeft {
  from { transform: translateX(-50px); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}
@keyframes fromRight {
  from { transform: translateX(50px); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}
@keyframes fromTop {
  from { transform: translateY(-50px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}
@keyframes fromBottom {
  from { transform: translateY(50px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

.float-text {
  animation-duration: 1.3s;
  animation-timing-function: ease-out;
}

.wander {
  animation: wander 6s ease-in-out infinite alternate;
}

@keyframes wander {
  from { transform: translate(0, 0); }
  to { transform: translate(6px, -6px); }
}

/* =====================
   BUTTONS
===================== */
.buttons {
  margin-top: 50px;
  position: relative;
  height: 140px;
}

#yesBtn {
  padding: 12px 28px;
  border-radius: 30px;
  border: none;
  background: #b71c1c;
  color: #fff;
  font-size: 16px;
  position: relative;
  z-index: 3;
}

#noBtn {
  position: absolute;
  left: 300px;
  top: 0;
  padding: 12px 28px;
  border-radius: 30px;
  border: 1px solid #aaa;
  background: transparent;
  color: #444;
  pointer-events: none;
  transition: transform .25s ease;
}

/* =====================
   FLOATING EMOJIS
===================== */
.float-emoji {
  position: fixed;
  font-size: 24px;
  opacity: 0.8;
  z-index: 1;
  transition: transform 6s linear, opacity 6s linear;
}
</style>
</head>

<body>

<div class="card-box" id="app"></div>

<script>
/* =====================
   AUDIO
===================== */
const music = new Audio(
  "https://cdn.pixabay.com/audio/2023/03/07/audio_1b5c2f93df.mp3"
);
music.loop = true;

/* =====================
   STATE
===================== */
let stage = 0;
let messageIndex = 0;
let noClicks = 0;

const app = document.getElementById("app");

/* =====================
   CONTENT
===================== */
const PRELUDE_MESSAGES = [
  "Heyâ€¦ how have you been, really?",
  "I hope today has been gentle with you.",
  "Love doesnâ€™t always shout â€” sometimes it just sits quietly.",
  "Itâ€™s nice when someone chooses care, even in small ways.",
  "So I wanted to ask you somethingâ€¦"
];

const NO_PHRASES = [
  "No ðŸ’”",
  "Pretty please? ðŸ¥º",
  "But we'd be so cute together ðŸ’•",
  "One more chance?",
  "Don't break my heart :(",
  "What about a maybe?",
  "I'm fragile ðŸ˜­"
];

/* =====================
   HELPERS
===================== */
function randomTextAnimation() {
  const a = ["fromLeft", "fromRight", "fromTop", "fromBottom"];
  return a[Math.floor(Math.random() * a.length)];
}

/* =====================
   RENDER ROUTER
===================== */
function render() {
  if (stage === 0) renderIntro();
  else if (stage === 1) renderPrelude();
  else if (stage === 2) renderQuestion();
  else renderSuccess();
}

/* =====================
   STAGES
===================== */
function renderIntro() {
  app.innerHTML = `
    <p class="float-text wander" style="animation-name:${randomTextAnimation()}">
      ðŸŒ¸ This is a small moment made with care.
    </p>
    <button id="yesBtn" class="mt-4" onclick="startExperience()">Begin</button>
  `;
}

function startExperience() {
  music.play().catch(() => {});
  stage = 1;
  render();
}

function renderPrelude() {
  app.innerHTML = `
    <p class="float-text wander" style="animation-name:${randomTextAnimation()}">
      ${PRELUDE_MESSAGES[messageIndex]}
    </p>
    <button id="yesBtn" class="mt-4" onclick="nextPrelude()">Continue</button>
  `;
}

function nextPrelude() {
  messageIndex++;
  if (messageIndex >= PRELUDE_MESSAGES.length) {
    stage = 2;
  }
  render();
}

function renderQuestion() {
  music.pause();
  music.currentTime = 0;

  const yesSize = 16 + noClicks * 5;

  app.innerHTML = `
    <h1 class="float-text" style="animation-name:${randomTextAnimation()}">
      Will you be my Valentine? ðŸ’˜
    </h1>

    <div class="buttons">
      <button id="yesBtn" style="font-size:${yesSize}px">Yes ðŸ’–</button>
      <button id="noBtn">
        ${noClicks === 0 ? "No" : NO_PHRASES[Math.min(noClicks - 1, NO_PHRASES.length - 1)]}
      </button>
    </div>
  `;

  document.getElementById("yesBtn").onclick = handleYes;
  enableNoRun();
}

function enableNoRun() {
  const noBtn = document.getElementById("noBtn");
  const area = document.querySelector(".buttons");

  area.onmousemove = (e) => {
    const r = area.getBoundingClientRect();
    const x = e.clientX - r.left;
    const y = e.clientY - r.top;

    noBtn.style.transform =
      `translate(${-(x - 160) * 0.35}px, ${-(y - 40) * 0.35}px)`;
  };

  area.onclick = () => {
    noClicks++;
    render();
  };
}

function handleYes() {
  document.body.style.background =
    "radial-gradient(circle at center, #ff6f91 0%, #5a0c18 80%)";
  stage = 3;
  render();
}

function renderSuccess() {
  app.innerHTML = `
    <h1 class="float-text wander" style="animation-name:${randomTextAnimation()}">
      Yay!!! ðŸ’–
    </h1>
    <p class="float-text wander">
      This moment just bloomed beautifully.
    </p>

    <a href="https://wa.me/?text=${encodeURIComponent(
      "ðŸŒ¸ Someone shared a gentle Valentine moment with me ðŸ’– " + location.href
    )}" target="_blank">
      <button id="yesBtn" class="mt-4">Share on WhatsApp ðŸ’¬</button>
    </a>
  `;

  startFloatingEmojis();
}

/* =====================
   FLOATING EMOJIS
===================== */
function startFloatingEmojis() {
  const icons = ["ðŸ’–", "ðŸŒ¸", "ðŸ’", "â¤ï¸", "ðŸŒ¹"];

  setInterval(() => {
    const el = document.createElement("div");
    el.className = "float-emoji";
    el.textContent = icons[Math.floor(Math.random() * icons.length)];
    el.style.left = Math.random() * 100 + "vw";
    el.style.top = "110vh";
    el.style.fontSize = 18 + Math.random() * 22 + "px";

    document.body.appendChild(el);

    requestAnimationFrame(() => {
      el.style.transform =
        `translate(${(Math.random() - 0.5) * 200}px, -120vh)`;
      el.style.opacity = 0;
    });

    setTimeout(() => el.remove(), 6000);
  }, 350);
}

/* INIT */
render();
</script>

</body>
</html>